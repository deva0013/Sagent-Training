{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\library-frontend\\\\library-frontend\\\\src\\\\pages\\\\NotificationsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { notifyAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NotificationsPage() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    addToast\n  } = window._toast || {\n    addToast: () => {}\n  };\n  const [notifs, setNotifs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const isLibrarian = (user === null || user === void 0 ? void 0 : user.role) === 'LIBRARIAN' || (user === null || user === void 0 ? void 0 : user.role) === 'librarian';\n  useEffect(() => {\n    const fn = isLibrarian ? notifyAPI.getAll() : notifyAPI.getByUser(user.userId);\n    fn.then(r => setNotifs(r.data)).catch(() => {}).finally(() => setLoading(false));\n  }, [user, isLibrarian]);\n  const iconMap = (message = '') => {\n    if (message.toLowerCase().includes('fine')) return {\n      icon: 'üí∞',\n      bg: '#fee2e2'\n    };\n    if (message.toLowerCase().includes('return')) return {\n      icon: 'üì¨',\n      bg: '#d1fae5'\n    };\n    if (message.toLowerCase().includes('due') || message.toLowerCase().includes('overdue')) return {\n      icon: '‚è∞',\n      bg: '#fef3c7'\n    };\n    return {\n      icon: 'üîî',\n      bg: 'var(--amber-pale)'\n    };\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 55\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fade-in\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: \"Notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-subtitle\",\n          children: [notifs.length, \" total messages\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: notifs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon\",\n          children: \"\\uD83D\\uDD14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"No notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You're all caught up!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this) : notifs.map((n, idx) => {\n        var _n$bookIssue;\n        const {\n          icon,\n          bg\n        } = iconMap(n.message);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-item\",\n          style: {\n            animationDelay: `${idx * 0.05}s`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notif-icon\",\n            style: {\n              background: bg\n            },\n            children: icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notif-content\",\n            style: {\n              flex: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"desc\",\n              children: n.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: 'var(--slate)',\n                marginTop: '0.25rem'\n              },\n              children: [n.user && `To: ${n.user.name || n.user.username}`, ((_n$bookIssue = n.bookIssue) === null || _n$bookIssue === void 0 ? void 0 : _n$bookIssue.book) && ` ¬∑ Book: ${n.bookIssue.book.title}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time\",\n              children: new Date(n.sentAt).toLocaleDateString('en-IN', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this)]\n        }, n.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificationsPage, \"MSbycAzrpHQ0x8rTCKLQ5S+Rpso=\", false, function () {\n  return [useAuth];\n});\n_c = NotificationsPage;\nvar _c;\n$RefreshReg$(_c, \"NotificationsPage\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","notifyAPI","jsxDEV","_jsxDEV","NotificationsPage","_s","user","addToast","window","_toast","notifs","setNotifs","loading","setLoading","isLibrarian","role","fn","getAll","getByUser","userId","then","r","data","catch","finally","iconMap","message","toLowerCase","includes","icon","bg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","n","idx","_n$bookIssue","style","animationDelay","background","flex","fontSize","color","marginTop","name","username","bookIssue","book","title","Date","sentAt","toLocaleDateString","year","month","day","id","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Downloads/library-frontend/library-frontend/src/pages/NotificationsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { notifyAPI } from '../services/api';\n\nexport default function NotificationsPage() {\n  const { user } = useAuth();\n  const { addToast } = (window._toast || { addToast: () => {} });\n  const [notifs, setNotifs] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const isLibrarian = user?.role === 'LIBRARIAN' || user?.role === 'librarian';\n\n  useEffect(() => {\n    const fn = isLibrarian ? notifyAPI.getAll() : notifyAPI.getByUser(user.userId);\n    fn.then(r => setNotifs(r.data)).catch(() => {}).finally(() => setLoading(false));\n  }, [user, isLibrarian]);\n\n  const iconMap = (message = '') => {\n    if (message.toLowerCase().includes('fine')) return { icon: 'üí∞', bg: '#fee2e2' };\n    if (message.toLowerCase().includes('return')) return { icon: 'üì¨', bg: '#d1fae5' };\n    if (message.toLowerCase().includes('due') || message.toLowerCase().includes('overdue')) return { icon: '‚è∞', bg: '#fef3c7' };\n    return { icon: 'üîî', bg: 'var(--amber-pale)' };\n  };\n\n  if (loading) return <div className=\"loading-center\"><div className=\"spinner\" /></div>;\n\n  return (\n    <div className=\"fade-in\">\n      <div className=\"page-header\">\n        <div>\n          <h1 className=\"page-title\">Notifications</h1>\n          <p className=\"page-subtitle\">{notifs.length} total messages</p>\n        </div>\n      </div>\n\n      <div className=\"card\">\n        {notifs.length === 0 ? (\n          <div className=\"empty-state\">\n            <div className=\"icon\">üîî</div>\n            <h3>No notifications</h3>\n            <p>You're all caught up!</p>\n          </div>\n        ) : notifs.map((n, idx) => {\n          const { icon, bg } = iconMap(n.message);\n          return (\n            <div key={n.id} className=\"notification-item\" style={{ animationDelay: `${idx * 0.05}s` }}>\n              <div className=\"notif-icon\" style={{ background: bg }}>{icon}</div>\n              <div className=\"notif-content\" style={{ flex: 1 }}>\n                <div className=\"desc\">{n.message}</div>\n                <div style={{ fontSize: '0.8rem', color: 'var(--slate)', marginTop: '0.25rem' }}>\n                  {n.user && `To: ${n.user.name || n.user.username}`}\n                  {n.bookIssue?.book && ` ¬∑ Book: ${n.bookIssue.book.title}`}\n                </div>\n                <div className=\"time\">{new Date(n.sentAt).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}