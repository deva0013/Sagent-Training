{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ssdgk\\\\Downloads\\\\GroceryMonitoring\\\\grocery-frontend-v2\\\\src\\\\pages\\\\CartPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { addCart, addOrder, addPayment, getAllDiscounts, getAllOrders } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STEPS = ['Cart Review', 'Checkout', 'Payment', 'Confirmation'];\n\n// â”€â”€â”€ Discount Rule Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n// Determines if a discount is ELIGIBLE for the current user + cart\n// Rules based on discountOfferType naming conventions:\n//   \"NEWUSER\"        â†’ only if user has 0 previous orders\n//   \"AUTO X% OFF\"    â†’ auto-applied based on cart amount thresholds\n//   \"FESTIVAL OFFER\" â†’ always available (seasonal)\n//   \"SUPERSALE...\"   â†’ always available (sale)\n//   any other code   â†’ always available (manual coupon)\n\nfunction classifyDiscount(discount, cartTotal, orderCount) {\n  const type = (discount.discountOfferType || '').toUpperCase().trim();\n  const pct = discount.discountPercentage;\n\n  // â”€â”€ Rule 1: NEWUSER â†’ only if this is first order\n  if (type.includes('NEWUSER') || type.includes('NEW USER') || type.includes('NEW_USER')) {\n    if (orderCount > 0) {\n      return {\n        eligible: false,\n        reason: 'Only for first-time orders'\n      };\n    }\n    return {\n      eligible: true,\n      tag: 'ðŸŽ New User',\n      reason: 'Welcome offer for first order!'\n    };\n  }\n\n  // â”€â”€ Rule 2: AUTO discounts â†’ applied automatically based on cart total\n  if (type.startsWith('AUTO')) {\n    // Extract threshold from name if present e.g. \"AUTO 5.0% OFF\" means auto\n    // Apply based on percentage tiers: small % = low threshold, high % = high threshold\n    if (pct >= 40) {\n      if (cartTotal < 1000) return {\n        eligible: false,\n        reason: `Spend â‚¹${(1000 - cartTotal).toFixed(0)} more to unlock`\n      };\n      return {\n        eligible: true,\n        tag: 'âš¡ Auto',\n        reason: 'Applied for orders above â‚¹1000',\n        auto: true\n      };\n    }\n    if (pct >= 20) {\n      if (cartTotal < 500) return {\n        eligible: false,\n        reason: `Spend â‚¹${(500 - cartTotal).toFixed(0)} more to unlock`\n      };\n      return {\n        eligible: true,\n        tag: 'âš¡ Auto',\n        reason: 'Applied for orders above â‚¹500',\n        auto: true\n      };\n    }\n    if (pct >= 10) {\n      if (cartTotal < 200) return {\n        eligible: false,\n        reason: `Spend â‚¹${(200 - cartTotal).toFixed(0)} more to unlock`\n      };\n      return {\n        eligible: true,\n        tag: 'âš¡ Auto',\n        reason: 'Applied for orders above â‚¹200',\n        auto: true\n      };\n    }\n    if (pct > 0) {\n      if (cartTotal < 100) return {\n        eligible: false,\n        reason: `Spend â‚¹${(100 - cartTotal).toFixed(0)} more to unlock`\n      };\n      return {\n        eligible: true,\n        tag: 'âš¡ Auto',\n        reason: 'Applied for orders above â‚¹100',\n        auto: true\n      };\n    }\n    // 0% discount â€” skip\n    return {\n      eligible: false,\n      reason: 'Not applicable',\n      hidden: true\n    };\n  }\n\n  // â”€â”€ Rule 3: Zero percentage discount â†’ skip entirely\n  if (pct === 0 || pct === null || pct === undefined) {\n    return {\n      eligible: false,\n      reason: 'Not applicable',\n      hidden: true\n    };\n  }\n\n  // â”€â”€ Rule 4: Festival / Seasonal â†’ always available, manual apply\n  if (type.includes('FESTIVAL') || type.includes('SEASON') || type.includes('DIWALI') || type.includes('ONAM')) {\n    return {\n      eligible: true,\n      tag: 'ðŸŽ‰ Seasonal',\n      reason: 'Festival special offer'\n    };\n  }\n\n  // â”€â”€ Rule 5: Sale offers â†’ always available\n  if (type.includes('SALE') || type.includes('DEAL') || type.includes('OFFER')) {\n    return {\n      eligible: true,\n      tag: 'ðŸ· Sale',\n      reason: 'Limited time sale'\n    };\n  }\n\n  // â”€â”€ Rule 6: Any other named coupon â†’ always valid (manual entry)\n  return {\n    eligible: true,\n    tag: 'ðŸŽŸ Coupon',\n    reason: 'Apply this coupon code'\n  };\n}\n\n// â”€â”€â”€ Component â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nexport default function CartPage() {\n  _s();\n  const {\n    cartItems,\n    removeFromCart,\n    updateQty,\n    clearCart,\n    cartTotal\n  } = useCart();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [step, setStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [orderId, setOrderId] = useState(null);\n  const [paymentMethod, setPaymentMethod] = useState('CARD');\n  const [deliveryAddress, setDeliveryAddress] = useState((user === null || user === void 0 ? void 0 : user.address) || '');\n  const [allDiscounts, setAllDiscounts] = useState([]);\n  const [userOrderCount, setUserOrderCount] = useState(0);\n  const [showOffers, setShowOffers] = useState(false);\n  const [discountCode, setDiscountCode] = useState('');\n  const [appliedDiscount, setAppliedDiscount] = useState(null);\n  const [discountMsg, setDiscountMsg] = useState({\n    text: '',\n    ok: false\n  });\n\n  // Load discounts + user's order count\n  useEffect(() => {\n    getAllDiscounts().then(r => setAllDiscounts(r.data)).catch(() => {});\n    getAllOrders().then(r => {\n      const mine = r.data.filter(o => {\n        var _o$user;\n        return ((_o$user = o.user) === null || _o$user === void 0 ? void 0 : _o$user.userId) === (user === null || user === void 0 ? void 0 : user.userId);\n      });\n      setUserOrderCount(mine.length);\n    }).catch(() => {});\n  }, [user]);\n\n  // Enrich discounts with eligibility\n  const enrichedDiscounts = allDiscounts.map(d => ({\n    ...d,\n    ...classifyDiscount(d, cartTotal, userOrderCount)\n  })).filter(d => !d.hidden);\n  const eligibleDiscounts = enrichedDiscounts.filter(d => d.eligible);\n  const ineligibleDiscounts = enrichedDiscounts.filter(d => !d.eligible);\n\n  // Auto-apply best eligible AUTO discount (highest %)\n  useEffect(() => {\n    if (appliedDiscount) return; // don't override manual selection\n    const autoDiscounts = eligibleDiscounts.filter(d => d.auto);\n    if (autoDiscounts.length > 0) {\n      const best = autoDiscounts.reduce((a, b) => a.discountPercentage > b.discountPercentage ? a : b);\n      setAppliedDiscount(best);\n      setDiscountMsg({\n        text: `âš¡ \"${best.discountOfferType}\" auto-applied â€” ${best.discountPercentage}% off!`,\n        ok: true\n      });\n    }\n  }, [eligibleDiscounts.length, cartTotal]);\n  const discountAmt = appliedDiscount ? cartTotal * appliedDiscount.discountPercentage / 100 : 0;\n  const finalTotal = Math.max(0, cartTotal - discountAmt);\n  const applyCode = code => {\n    const c = (code || discountCode).trim().toUpperCase();\n    if (!c) {\n      setDiscountMsg({\n        text: 'âš ï¸ Please enter a discount code.',\n        ok: false\n      });\n      return;\n    }\n    const found = enrichedDiscounts.find(d => {\n      var _d$discountOfferType;\n      return ((_d$discountOfferType = d.discountOfferType) === null || _d$discountOfferType === void 0 ? void 0 : _d$discountOfferType.toUpperCase()) === c;\n    });\n    if (!found) {\n      setAppliedDiscount(null);\n      setDiscountMsg({\n        text: 'âŒ Invalid discount code. Check available offers below.',\n        ok: false\n      });\n      return;\n    }\n    if (!found.eligible) {\n      setAppliedDiscount(null);\n      setDiscountMsg({\n        text: `âŒ Not eligible: ${found.reason}`,\n        ok: false\n      });\n      return;\n    }\n    setAppliedDiscount(found);\n    setDiscountCode(found.discountOfferType);\n    setDiscountMsg({\n      text: `âœ… \"${found.discountOfferType}\" applied â€” ${found.discountPercentage}% off!`,\n      ok: true\n    });\n    setShowOffers(false);\n  };\n  const handleOfferClick = offer => {\n    if (!offer.eligible) return;\n    setDiscountCode(offer.discountOfferType);\n    setAppliedDiscount(offer);\n    setDiscountMsg({\n      text: `âœ… \"${offer.discountOfferType}\" applied â€” ${offer.discountPercentage}% off!`,\n      ok: true\n    });\n    setShowOffers(false);\n  };\n  const removeDiscount = () => {\n    setAppliedDiscount(null);\n    setDiscountCode('');\n    setDiscountMsg({\n      text: '',\n      ok: false\n    });\n  };\n  const handlePlaceOrder = async () => {\n    if (!deliveryAddress.trim()) {\n      setError('Please enter a delivery address.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const cartRes = await addCart({\n        cartTotal: finalTotal,\n        user: {\n          userId: user.userId\n        },\n        ...(appliedDiscount ? {\n          discount: {\n            discountId: appliedDiscount.discountId\n          }\n        } : {})\n      });\n      const orderRes = await addOrder({\n        orderTotal: finalTotal,\n        orderStatus: 'CONFIRMED',\n        user: {\n          userId: user.userId\n        },\n        cart: {\n          cartId: cartRes.data.cartId\n        }\n      });\n      setOrderId(orderRes.data.orderId);\n      setStep(2);\n    } catch {\n      setError('Failed to place order. Please ensure the backend is running.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handlePayment = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      await addPayment({\n        paymentMethod,\n        paymentStatus: 'SUCCESS',\n        paymentAmount: finalTotal,\n        order: {\n          orderId\n        }\n      });\n      clearCart();\n      setStep(3);\n    } catch {\n      setError('Payment failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getEmoji = cat => {\n    if (!cat) return 'ðŸ›’';\n    const k = cat.toLowerCase();\n    if (k.includes('fruit')) return 'ðŸŽ';\n    if (k.includes('veg')) return 'ðŸ¥¦';\n    if (k.includes('dairy')) return 'ðŸ¥›';\n    if (k.includes('bakery')) return 'ðŸž';\n    return 'ðŸ›’';\n  };\n  if (cartItems.length === 0 && step !== 3) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-state\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emo\",\n        children: \"\\uD83D\\uDED2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your cart is empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add some fresh groceries to get started!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate('/products'),\n        children: \"Browse Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-subtitle\",\n        children: \"Complete your order in a few easy steps\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout-steps\",\n      children: STEPS.map((s, i) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `step ${i === step ? 'active' : i < step ? 'done' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-circle\",\n            children: i < step ? 'âœ“' : i + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-label\",\n            children: s\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), i < STEPS.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `step-line ${i < step ? 'done' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 38\n        }, this)]\n      }, s, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error\",\n      children: [\"\\u26A0\\uFE0F \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }, this), step === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-card-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cart-card-title\",\n            children: [\"Your Items (\", cartItems.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-ghost btn-sm\",\n            onClick: () => {\n              if (window.confirm('Clear cart?')) clearCart();\n            },\n            children: \"\\uD83D\\uDDD1 Clear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), cartItems.map(item => {\n          var _item$productPrice;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-item-icon\",\n              children: getEmoji(item.productCategory)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cart-item-name\",\n                children: item.productName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cart-item-unit\",\n                children: [\"\\u20B9\", (_item$productPrice = item.productPrice) === null || _item$productPrice === void 0 ? void 0 : _item$productPrice.toFixed(2), \" each\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"qty-ctrl\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"qty-btn\",\n                onClick: () => updateQty(item.productId, item.qty - 1),\n                children: \"\\u2212\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"qty-num\",\n                children: item.qty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"qty-btn\",\n                onClick: () => updateQty(item.productId, item.qty + 1),\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-item-total\",\n              children: [\"\\u20B9\", (item.productPrice * item.qty).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"del-btn\",\n              onClick: () => removeFromCart(item.productId),\n              children: \"\\uD83D\\uDDD1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this)]\n          }, item.productId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-title\",\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), userOrderCount === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.75rem',\n              color: 'rgba(250,247,240,0.6)',\n              marginTop: '0.2rem'\n            },\n            children: \"\\uD83C\\uDF81 First order \\u2014 new user offers available!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"discount-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"discount-label\",\n              children: \"\\uD83C\\uDF81 Discount Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"discount-input-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Enter code\\u2026\",\n                value: discountCode,\n                onChange: e => setDiscountCode(e.target.value),\n                onKeyDown: e => e.key === 'Enter' && applyCode(),\n                style: {\n                  textTransform: 'uppercase'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline btn-sm\",\n                onClick: () => applyCode(),\n                children: \"Apply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), discountMsg.text && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                marginBottom: '0.6rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.4rem',\n                color: discountMsg.ok ? 'var(--jade)' : 'var(--red)'\n              },\n              children: [discountMsg.text, appliedDiscount && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: removeDiscount,\n                style: {\n                  marginLeft: '0.25rem',\n                  background: 'none',\n                  border: 'none',\n                  color: 'var(--red)',\n                  cursor: 'pointer',\n                  fontSize: '0.75rem',\n                  fontWeight: 700\n                },\n                children: \"\\u2715 Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this), enrichedDiscounts.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"discount-available-toggle\",\n              onClick: () => setShowOffers(!showOffers),\n              children: [\"\\uD83C\\uDFF7 \", showOffers ? 'Hide' : 'View', \" available offers\", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '0.7rem'\n                },\n                children: showOffers ? 'â–²' : 'â–¼'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this), showOffers && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"discount-offers-list\",\n              children: [eligibleDiscounts.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '0.4rem 0.9rem',\n                    fontSize: '0.7rem',\n                    fontWeight: 700,\n                    color: 'var(--jade)',\n                    textTransform: 'uppercase',\n                    letterSpacing: '0.06em',\n                    background: 'rgba(45,134,83,0.05)',\n                    borderBottom: '1px solid #ede8de'\n                  },\n                  children: \"\\u2705 Available for you\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 25\n                }, this), eligibleDiscounts.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"discount-offer-item\",\n                  onClick: () => handleOfferClick(d),\n                  style: {\n                    cursor: 'pointer'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.4rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"offer-code\",\n                        children: d.discountOfferType\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 343,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: '0.68rem',\n                          background: 'rgba(45,134,83,0.1)',\n                          color: 'var(--jade)',\n                          padding: '0.1rem 0.45rem',\n                          borderRadius: '20px',\n                          fontWeight: 700\n                        },\n                        children: d.tag\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"offer-apply\",\n                      children: d.reason\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 350,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'right'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"offer-pct\",\n                      children: [d.discountPercentage, \"% OFF\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.68rem',\n                        color: 'var(--jade)',\n                        fontWeight: 600\n                      },\n                      children: \"Tap to apply\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 29\n                  }, this)]\n                }, d.discountId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 27\n                }, this))]\n              }, void 0, true), ineligibleDiscounts.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '0.4rem 0.9rem',\n                    fontSize: '0.7rem',\n                    fontWeight: 700,\n                    color: 'var(--text-pale)',\n                    textTransform: 'uppercase',\n                    letterSpacing: '0.06em',\n                    background: '#faf7f0',\n                    borderBottom: '1px solid #ede8de',\n                    borderTop: eligibleDiscounts.length > 0 ? '2px solid #ede8de' : 'none'\n                  },\n                  children: \"\\uD83D\\uDD12 Locked \\u2014 not yet eligible\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 25\n                }, this), ineligibleDiscounts.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"discount-offer-item\",\n                  style: {\n                    opacity: 0.5,\n                    cursor: 'not-allowed'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.4rem'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"offer-code\",\n                        style: {\n                          color: '#aaa'\n                        },\n                        children: d.discountOfferType\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"offer-apply\",\n                      style: {\n                        color: '#c0392b'\n                      },\n                      children: [\"\\uD83D\\uDD12 \", d.reason]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 381,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"offer-pct\",\n                    style: {\n                      color: '#bbb'\n                    },\n                    children: [d.discountPercentage, \"% OFF\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 29\n                  }, this)]\n                }, d.discountId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 27\n                }, this))]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 44\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u20B9\", cartTotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 65\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this), appliedDiscount && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row discount\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Discount (\", appliedDiscount.discountOfferType, \" \\xB7 \", appliedDiscount.discountPercentage, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u2212\\u20B9\", discountAmt.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u20B9\", finalTotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-full\",\n            onClick: () => setStep(1),\n            children: \"Proceed to Checkout \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }, this), step === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-card\",\n      style: {\n        maxWidth: 560\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontFamily: 'Cormorant Garamond',\n          fontSize: '1.4rem',\n          color: 'var(--forest)',\n          marginBottom: '1.5rem'\n        },\n        children: \"\\uD83C\\uDFE0 Delivery Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Delivery Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control\",\n          rows: 3,\n          placeholder: \"Enter your full delivery address\",\n          value: deliveryAddress,\n          onChange: e => setDeliveryAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-row total\",\n        style: {\n          marginBottom: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Order Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u20B9\", finalTotal.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '0.75rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-ghost\",\n          onClick: () => setStep(0),\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          disabled: loading,\n          onClick: handlePlaceOrder,\n          children: loading ? 'â³ Placingâ€¦' : 'âœ… Place Order'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }, this), step === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-card\",\n      style: {\n        maxWidth: 560\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontFamily: 'Cormorant Garamond',\n          fontSize: '1.4rem',\n          color: 'var(--forest)',\n          marginBottom: '1.5rem'\n        },\n        children: \"\\uD83D\\uDCB3 Complete Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        children: [\"Order #\", orderId, \" placed! Choose payment to confirm.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"form-control\",\n          value: paymentMethod,\n          onChange: e => setPaymentMethod(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"CARD\",\n            children: \"\\uD83D\\uDCB3 Credit / Debit Card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"UPI\",\n            children: \"\\uD83D\\uDCF1 UPI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"WALLET\",\n            children: \"\\uD83D\\uDC5B Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"COD\",\n            children: \"\\uD83D\\uDEAA Cash on Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-row total\",\n        style: {\n          marginBottom: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Amount to Pay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u20B9\", finalTotal.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-gold btn-full\",\n        disabled: loading,\n        onClick: handlePayment,\n        children: loading ? 'â³ Processingâ€¦' : `Pay â‚¹${finalTotal.toFixed(2)} via ${paymentMethod}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 9\n    }, this), step === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-card\",\n      style: {\n        textAlign: 'center',\n        padding: '4rem 2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '4rem',\n          marginBottom: '1rem'\n        },\n        children: \"\\uD83C\\uDF89\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontFamily: 'Cormorant Garamond',\n          fontSize: '2rem',\n          color: 'var(--forest)',\n          marginBottom: '0.5rem'\n        },\n        children: \"Order Confirmed!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'var(--text-soft)',\n          marginBottom: '0.4rem'\n        },\n        children: [\"Your order #\", orderId, \" has been placed and payment received.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'var(--text-pale)',\n          fontSize: '0.9rem',\n          marginBottom: '2rem'\n        },\n        children: \"You'll receive a notification once it's out for delivery \\uD83D\\uDE9A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '1rem',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-ghost\",\n          onClick: () => navigate('/orders'),\n          children: \"View Orders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => navigate('/products'),\n          children: \"Continue Shopping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n}\n_s(CartPage, \"fVwdNjoViEOXgt3YClKyaDbqKIs=\", false, function () {\n  return [useCart, useAuth, useNavigate];\n});\n_c = CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCart","useAuth","addCart","addOrder","addPayment","getAllDiscounts","getAllOrders","jsxDEV","_jsxDEV","Fragment","_Fragment","STEPS","classifyDiscount","discount","cartTotal","orderCount","type","discountOfferType","toUpperCase","trim","pct","discountPercentage","includes","eligible","reason","tag","startsWith","toFixed","auto","hidden","undefined","CartPage","_s","cartItems","removeFromCart","updateQty","clearCart","user","navigate","step","setStep","loading","setLoading","error","setError","orderId","setOrderId","paymentMethod","setPaymentMethod","deliveryAddress","setDeliveryAddress","address","allDiscounts","setAllDiscounts","userOrderCount","setUserOrderCount","showOffers","setShowOffers","discountCode","setDiscountCode","appliedDiscount","setAppliedDiscount","discountMsg","setDiscountMsg","text","ok","then","r","data","catch","mine","filter","o","_o$user","userId","length","enrichedDiscounts","map","d","eligibleDiscounts","ineligibleDiscounts","autoDiscounts","best","reduce","a","b","discountAmt","finalTotal","Math","max","applyCode","code","c","found","find","_d$discountOfferType","handleOfferClick","offer","removeDiscount","handlePlaceOrder","cartRes","discountId","orderRes","orderTotal","orderStatus","cart","cartId","handlePayment","paymentStatus","paymentAmount","order","getEmoji","cat","k","toLowerCase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","s","i","window","confirm","item","_item$productPrice","productCategory","productName","productPrice","productId","qty","style","fontSize","color","marginTop","placeholder","value","onChange","e","target","onKeyDown","key","textTransform","marginBottom","display","alignItems","gap","marginLeft","background","border","cursor","fontWeight","padding","letterSpacing","borderBottom","borderRadius","textAlign","borderTop","opacity","maxWidth","fontFamily","rows","disabled","justifyContent","_c","$RefreshReg$"],"sources":["C:/Users/ssdgk/Downloads/GroceryMonitoring/grocery-frontend-v2/src/pages/CartPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { addCart, addOrder, addPayment, getAllDiscounts, getAllOrders } from '../services/api';\n\nconst STEPS = ['Cart Review', 'Checkout', 'Payment', 'Confirmation'];\n\n// â”€â”€â”€ Discount Rule Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n// Determines if a discount is ELIGIBLE for the current user + cart\n// Rules based on discountOfferType naming conventions:\n//   \"NEWUSER\"        â†’ only if user has 0 previous orders\n//   \"AUTO X% OFF\"    â†’ auto-applied based on cart amount thresholds\n//   \"FESTIVAL OFFER\" â†’ always available (seasonal)\n//   \"SUPERSALE...\"   â†’ always available (sale)\n//   any other code   â†’ always available (manual coupon)\n\nfunction classifyDiscount(discount, cartTotal, orderCount) {\n  const type = (discount.discountOfferType || '').toUpperCase().trim();\n  const pct  = discount.discountPercentage;\n\n  // â”€â”€ Rule 1: NEWUSER â†’ only if this is first order\n  if (type.includes('NEWUSER') || type.includes('NEW USER') || type.includes('NEW_USER')) {\n    if (orderCount > 0) {\n      return { eligible: false, reason: 'Only for first-time orders' };\n    }\n    return { eligible: true, tag: 'ðŸŽ New User', reason: 'Welcome offer for first order!' };\n  }\n\n  // â”€â”€ Rule 2: AUTO discounts â†’ applied automatically based on cart total\n  if (type.startsWith('AUTO')) {\n    // Extract threshold from name if present e.g. \"AUTO 5.0% OFF\" means auto\n    // Apply based on percentage tiers: small % = low threshold, high % = high threshold\n    if (pct >= 40) {\n      if (cartTotal < 1000) return { eligible: false, reason: `Spend â‚¹${(1000 - cartTotal).toFixed(0)} more to unlock` };\n      return { eligible: true, tag: 'âš¡ Auto', reason: 'Applied for orders above â‚¹1000', auto: true };\n    }\n    if (pct >= 20) {\n      if (cartTotal < 500) return { eligible: false, reason: `Spend â‚¹${(500 - cartTotal).toFixed(0)} more to unlock` };\n      return { eligible: true, tag: 'âš¡ Auto', reason: 'Applied for orders above â‚¹500', auto: true };\n    }\n    if (pct >= 10) {\n      if (cartTotal < 200) return { eligible: false, reason: `Spend â‚¹${(200 - cartTotal).toFixed(0)} more to unlock` };\n      return { eligible: true, tag: 'âš¡ Auto', reason: 'Applied for orders above â‚¹200', auto: true };\n    }\n    if (pct > 0) {\n      if (cartTotal < 100) return { eligible: false, reason: `Spend â‚¹${(100 - cartTotal).toFixed(0)} more to unlock` };\n      return { eligible: true, tag: 'âš¡ Auto', reason: 'Applied for orders above â‚¹100', auto: true };\n    }\n    // 0% discount â€” skip\n    return { eligible: false, reason: 'Not applicable', hidden: true };\n  }\n\n  // â”€â”€ Rule 3: Zero percentage discount â†’ skip entirely\n  if (pct === 0 || pct === null || pct === undefined) {\n    return { eligible: false, reason: 'Not applicable', hidden: true };\n  }\n\n  // â”€â”€ Rule 4: Festival / Seasonal â†’ always available, manual apply\n  if (type.includes('FESTIVAL') || type.includes('SEASON') || type.includes('DIWALI') || type.includes('ONAM')) {\n    return { eligible: true, tag: 'ðŸŽ‰ Seasonal', reason: 'Festival special offer' };\n  }\n\n  // â”€â”€ Rule 5: Sale offers â†’ always available\n  if (type.includes('SALE') || type.includes('DEAL') || type.includes('OFFER')) {\n    return { eligible: true, tag: 'ðŸ· Sale', reason: 'Limited time sale' };\n  }\n\n  // â”€â”€ Rule 6: Any other named coupon â†’ always valid (manual entry)\n  return { eligible: true, tag: 'ðŸŽŸ Coupon', reason: 'Apply this coupon code' };\n}\n\n// â”€â”€â”€ Component â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nexport default function CartPage() {\n  const { cartItems, removeFromCart, updateQty, clearCart, cartTotal } = useCart();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  const [step, setStep]               = useState(0);\n  const [loading, setLoading]         = useState(false);\n  const [error, setError]             = useState('');\n  const [orderId, setOrderId]         = useState(null);\n  const [paymentMethod, setPaymentMethod] = useState('CARD');\n  const [deliveryAddress, setDeliveryAddress] = useState(user?.address || '');\n\n  const [allDiscounts, setAllDiscounts]   = useState([]);\n  const [userOrderCount, setUserOrderCount] = useState(0);\n  const [showOffers, setShowOffers]       = useState(false);\n  const [discountCode, setDiscountCode]   = useState('');\n  const [appliedDiscount, setAppliedDiscount] = useState(null);\n  const [discountMsg, setDiscountMsg]     = useState({ text: '', ok: false });\n\n  // Load discounts + user's order count\n  useEffect(() => {\n    getAllDiscounts().then(r => setAllDiscounts(r.data)).catch(() => {});\n    getAllOrders()\n      .then(r => {\n        const mine = r.data.filter(o => o.user?.userId === user?.userId);\n        setUserOrderCount(mine.length);\n      })\n      .catch(() => {});\n  }, [user]);\n\n  // Enrich discounts with eligibility\n  const enrichedDiscounts = allDiscounts\n    .map(d => ({ ...d, ...classifyDiscount(d, cartTotal, userOrderCount) }))\n    .filter(d => !d.hidden);\n\n  const eligibleDiscounts   = enrichedDiscounts.filter(d => d.eligible);\n  const ineligibleDiscounts = enrichedDiscounts.filter(d => !d.eligible);\n\n  // Auto-apply best eligible AUTO discount (highest %)\n  useEffect(() => {\n    if (appliedDiscount) return; // don't override manual selection\n    const autoDiscounts = eligibleDiscounts.filter(d => d.auto);\n    if (autoDiscounts.length > 0) {\n      const best = autoDiscounts.reduce((a, b) => a.discountPercentage > b.discountPercentage ? a : b);\n      setAppliedDiscount(best);\n      setDiscountMsg({ text: `âš¡ \"${best.discountOfferType}\" auto-applied â€” ${best.discountPercentage}% off!`, ok: true });\n    }\n  }, [eligibleDiscounts.length, cartTotal]);\n\n  const discountAmt = appliedDiscount ? (cartTotal * appliedDiscount.discountPercentage) / 100 : 0;\n  const finalTotal  = Math.max(0, cartTotal - discountAmt);\n\n  const applyCode = (code) => {\n    const c = (code || discountCode).trim().toUpperCase();\n    if (!c) { setDiscountMsg({ text: 'âš ï¸ Please enter a discount code.', ok: false }); return; }\n\n    const found = enrichedDiscounts.find(d => d.discountOfferType?.toUpperCase() === c);\n    if (!found) {\n      setAppliedDiscount(null);\n      setDiscountMsg({ text: 'âŒ Invalid discount code. Check available offers below.', ok: false });\n      return;\n    }\n    if (!found.eligible) {\n      setAppliedDiscount(null);\n      setDiscountMsg({ text: `âŒ Not eligible: ${found.reason}`, ok: false });\n      return;\n    }\n    setAppliedDiscount(found);\n    setDiscountCode(found.discountOfferType);\n    setDiscountMsg({ text: `âœ… \"${found.discountOfferType}\" applied â€” ${found.discountPercentage}% off!`, ok: true });\n    setShowOffers(false);\n  };\n\n  const handleOfferClick = (offer) => {\n    if (!offer.eligible) return;\n    setDiscountCode(offer.discountOfferType);\n    setAppliedDiscount(offer);\n    setDiscountMsg({ text: `âœ… \"${offer.discountOfferType}\" applied â€” ${offer.discountPercentage}% off!`, ok: true });\n    setShowOffers(false);\n  };\n\n  const removeDiscount = () => {\n    setAppliedDiscount(null);\n    setDiscountCode('');\n    setDiscountMsg({ text: '', ok: false });\n  };\n\n  const handlePlaceOrder = async () => {\n    if (!deliveryAddress.trim()) { setError('Please enter a delivery address.'); return; }\n    setLoading(true); setError('');\n    try {\n      const cartRes = await addCart({\n        cartTotal: finalTotal,\n        user: { userId: user.userId },\n        ...(appliedDiscount ? { discount: { discountId: appliedDiscount.discountId } } : {}),\n      });\n      const orderRes = await addOrder({\n        orderTotal: finalTotal,\n        orderStatus: 'CONFIRMED',\n        user: { userId: user.userId },\n        cart: { cartId: cartRes.data.cartId },\n      });\n      setOrderId(orderRes.data.orderId);\n      setStep(2);\n    } catch { setError('Failed to place order. Please ensure the backend is running.'); }\n    finally { setLoading(false); }\n  };\n\n  const handlePayment = async () => {\n    setLoading(true); setError('');\n    try {\n      await addPayment({\n        paymentMethod,\n        paymentStatus: 'SUCCESS',\n        paymentAmount: finalTotal,\n        order: { orderId },\n      });\n      clearCart();\n      setStep(3);\n    } catch { setError('Payment failed. Please try again.'); }\n    finally { setLoading(false); }\n  };\n\n  const getEmoji = (cat) => {\n    if (!cat) return 'ðŸ›’';\n    const k = cat.toLowerCase();\n    if (k.includes('fruit')) return 'ðŸŽ';\n    if (k.includes('veg'))   return 'ðŸ¥¦';\n    if (k.includes('dairy')) return 'ðŸ¥›';\n    if (k.includes('bakery'))return 'ðŸž';\n    return 'ðŸ›’';\n  };\n\n  if (cartItems.length === 0 && step !== 3) return (\n    <div className=\"page\">\n      <div className=\"empty-state\">\n        <div className=\"emo\">ðŸ›’</div>\n        <h3>Your cart is empty</h3>\n        <p>Add some fresh groceries to get started!</p>\n        <button className=\"btn btn-primary\" onClick={() => navigate('/products')}>Browse Products</button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"page\">\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Checkout</h1>\n        <p className=\"page-subtitle\">Complete your order in a few easy steps</p>\n      </div>\n\n      {/* Steps */}\n      <div className=\"checkout-steps\">\n        {STEPS.map((s, i) => (\n          <React.Fragment key={s}>\n            <div className={`step ${i === step ? 'active' : i < step ? 'done' : ''}`}>\n              <div className=\"step-circle\">{i < step ? 'âœ“' : i + 1}</div>\n              <div className=\"step-label\">{s}</div>\n            </div>\n            {i < STEPS.length - 1 && <div className={`step-line ${i < step ? 'done' : ''}`} />}\n          </React.Fragment>\n        ))}\n      </div>\n\n      {error && <div className=\"alert alert-error\">âš ï¸ {error}</div>}\n\n      {/* â”€â”€ STEP 0: Cart Review â”€â”€ */}\n      {step === 0 && (\n        <div className=\"cart-layout\">\n          {/* Items */}\n          <div className=\"cart-card\">\n            <div className=\"cart-card-header\">\n              <span className=\"cart-card-title\">Your Items ({cartItems.length})</span>\n              <button className=\"btn btn-ghost btn-sm\"\n                onClick={() => { if (window.confirm('Clear cart?')) clearCart(); }}>\n                ðŸ—‘ Clear\n              </button>\n            </div>\n            {cartItems.map(item => (\n              <div key={item.productId} className=\"cart-item\">\n                <div className=\"cart-item-icon\">{getEmoji(item.productCategory)}</div>\n                <div className=\"cart-item-info\">\n                  <div className=\"cart-item-name\">{item.productName}</div>\n                  <div className=\"cart-item-unit\">â‚¹{item.productPrice?.toFixed(2)} each</div>\n                </div>\n                <div className=\"qty-ctrl\">\n                  <button className=\"qty-btn\" onClick={() => updateQty(item.productId, item.qty - 1)}>âˆ’</button>\n                  <span className=\"qty-num\">{item.qty}</span>\n                  <button className=\"qty-btn\" onClick={() => updateQty(item.productId, item.qty + 1)}>+</button>\n                </div>\n                <div className=\"cart-item-total\">â‚¹{(item.productPrice * item.qty).toFixed(2)}</div>\n                <button className=\"del-btn\" onClick={() => removeFromCart(item.productId)}>ðŸ—‘</button>\n              </div>\n            ))}\n          </div>\n\n          {/* Summary Panel */}\n          <div className=\"summary-panel\">\n            <div className=\"summary-header\">\n              <div className=\"summary-title\">Order Summary</div>\n              {userOrderCount === 0 && (\n                <div style={{ fontSize: '0.75rem', color: 'rgba(250,247,240,0.6)', marginTop: '0.2rem' }}>\n                  ðŸŽ First order â€” new user offers available!\n                </div>\n              )}\n            </div>\n            <div className=\"summary-body\">\n\n              {/* â”€â”€ Discount Section â”€â”€ */}\n              <div className=\"discount-section\">\n                <div className=\"discount-label\">ðŸŽ Discount Code</div>\n\n                {/* Input row */}\n                <div className=\"discount-input-row\">\n                  <input\n                    placeholder=\"Enter codeâ€¦\"\n                    value={discountCode}\n                    onChange={e => setDiscountCode(e.target.value)}\n                    onKeyDown={e => e.key === 'Enter' && applyCode()}\n                    style={{ textTransform: 'uppercase' }}\n                  />\n                  <button className=\"btn btn-outline btn-sm\" onClick={() => applyCode()}>Apply</button>\n                </div>\n\n                {/* Feedback message */}\n                {discountMsg.text && (\n                  <div style={{\n                    fontSize: '0.8rem', marginBottom: '0.6rem', display: 'flex',\n                    alignItems: 'center', gap: '0.4rem',\n                    color: discountMsg.ok ? 'var(--jade)' : 'var(--red)'\n                  }}>\n                    {discountMsg.text}\n                    {appliedDiscount && (\n                      <button onClick={removeDiscount}\n                        style={{ marginLeft: '0.25rem', background: 'none', border: 'none',\n                          color: 'var(--red)', cursor: 'pointer', fontSize: '0.75rem', fontWeight: 700 }}>\n                        âœ• Remove\n                      </button>\n                    )}\n                  </div>\n                )}\n\n                {/* Toggle available offers */}\n                {enrichedDiscounts.length > 0 && (\n                  <button className=\"discount-available-toggle\" onClick={() => setShowOffers(!showOffers)}>\n                    ðŸ· {showOffers ? 'Hide' : 'View'} available offers\n                    <span style={{ fontSize: '0.7rem' }}>{showOffers ? 'â–²' : 'â–¼'}</span>\n                  </button>\n                )}\n\n                {showOffers && (\n                  <div className=\"discount-offers-list\">\n\n                    {/* Eligible offers */}\n                    {eligibleDiscounts.length > 0 && (\n                      <>\n                        <div style={{\n                          padding: '0.4rem 0.9rem', fontSize: '0.7rem', fontWeight: 700,\n                          color: 'var(--jade)', textTransform: 'uppercase', letterSpacing: '0.06em',\n                          background: 'rgba(45,134,83,0.05)', borderBottom: '1px solid #ede8de'\n                        }}>\n                          âœ… Available for you\n                        </div>\n                        {eligibleDiscounts.map(d => (\n                          <div key={d.discountId} className=\"discount-offer-item\"\n                            onClick={() => handleOfferClick(d)}\n                            style={{ cursor: 'pointer' }}>\n                            <div>\n                              <div style={{ display: 'flex', alignItems: 'center', gap: '0.4rem' }}>\n                                <span className=\"offer-code\">{d.discountOfferType}</span>\n                                <span style={{\n                                  fontSize: '0.68rem', background: 'rgba(45,134,83,0.1)',\n                                  color: 'var(--jade)', padding: '0.1rem 0.45rem',\n                                  borderRadius: '20px', fontWeight: 700\n                                }}>{d.tag}</span>\n                              </div>\n                              <div className=\"offer-apply\">{d.reason}</div>\n                            </div>\n                            <div style={{ textAlign: 'right' }}>\n                              <div className=\"offer-pct\">{d.discountPercentage}% OFF</div>\n                              <div style={{ fontSize: '0.68rem', color: 'var(--jade)', fontWeight: 600 }}>Tap to apply</div>\n                            </div>\n                          </div>\n                        ))}\n                      </>\n                    )}\n\n                    {/* Locked offers */}\n                    {ineligibleDiscounts.length > 0 && (\n                      <>\n                        <div style={{\n                          padding: '0.4rem 0.9rem', fontSize: '0.7rem', fontWeight: 700,\n                          color: 'var(--text-pale)', textTransform: 'uppercase', letterSpacing: '0.06em',\n                          background: '#faf7f0', borderBottom: '1px solid #ede8de',\n                          borderTop: eligibleDiscounts.length > 0 ? '2px solid #ede8de' : 'none'\n                        }}>\n                          ðŸ”’ Locked â€” not yet eligible\n                        </div>\n                        {ineligibleDiscounts.map(d => (\n                          <div key={d.discountId} className=\"discount-offer-item\"\n                            style={{ opacity: 0.5, cursor: 'not-allowed' }}>\n                            <div>\n                              <div style={{ display: 'flex', alignItems: 'center', gap: '0.4rem' }}>\n                                <span className=\"offer-code\" style={{ color: '#aaa' }}>\n                                  {d.discountOfferType}\n                                </span>\n                              </div>\n                              <div className=\"offer-apply\" style={{ color: '#c0392b' }}>\n                                ðŸ”’ {d.reason}\n                              </div>\n                            </div>\n                            <div className=\"offer-pct\" style={{ color: '#bbb' }}>\n                              {d.discountPercentage}% OFF\n                            </div>\n                          </div>\n                        ))}\n                      </>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Totals */}\n              <div className=\"divider\" />\n              <div className=\"summary-row\"><span>Subtotal</span><span>â‚¹{cartTotal.toFixed(2)}</span></div>\n              {appliedDiscount && (\n                <div className=\"summary-row discount\">\n                  <span>Discount ({appliedDiscount.discountOfferType} Â· {appliedDiscount.discountPercentage}%)</span>\n                  <span>âˆ’â‚¹{discountAmt.toFixed(2)}</span>\n                </div>\n              )}\n              <div className=\"divider\" />\n              <div className=\"summary-row total\">\n                <span>Total</span><span>â‚¹{finalTotal.toFixed(2)}</span>\n              </div>\n              <br />\n              <button className=\"btn btn-primary btn-full\" onClick={() => setStep(1)}>\n                Proceed to Checkout â†’\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* â”€â”€ STEP 1: Delivery â”€â”€ */}\n      {step === 1 && (\n        <div className=\"section-card\" style={{ maxWidth: 560 }}>\n          <h3 style={{ fontFamily: 'Cormorant Garamond', fontSize: '1.4rem', color: 'var(--forest)', marginBottom: '1.5rem' }}>\n            ðŸ  Delivery Details\n          </h3>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Delivery Address</label>\n            <textarea className=\"form-control\" rows={3}\n              placeholder=\"Enter your full delivery address\"\n              value={deliveryAddress} onChange={e => setDeliveryAddress(e.target.value)} />\n          </div>\n          <div className=\"summary-row total\" style={{ marginBottom: '1.5rem' }}>\n            <span>Order Total</span><span>â‚¹{finalTotal.toFixed(2)}</span>\n          </div>\n          <div style={{ display: 'flex', gap: '0.75rem' }}>\n            <button className=\"btn btn-ghost\" onClick={() => setStep(0)}>â† Back</button>\n            <button className=\"btn btn-primary\" disabled={loading} onClick={handlePlaceOrder}>\n              {loading ? 'â³ Placingâ€¦' : 'âœ… Place Order'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* â”€â”€ STEP 2: Payment â”€â”€ */}\n      {step === 2 && (\n        <div className=\"section-card\" style={{ maxWidth: 560 }}>\n          <h3 style={{ fontFamily: 'Cormorant Garamond', fontSize: '1.4rem', color: 'var(--forest)', marginBottom: '1.5rem' }}>\n            ðŸ’³ Complete Payment\n          </h3>\n          <div className=\"alert alert-success\">Order #{orderId} placed! Choose payment to confirm.</div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Payment Method</label>\n            <select className=\"form-control\" value={paymentMethod} onChange={e => setPaymentMethod(e.target.value)}>\n              <option value=\"CARD\">ðŸ’³ Credit / Debit Card</option>\n              <option value=\"UPI\">ðŸ“± UPI</option>\n              <option value=\"WALLET\">ðŸ‘› Wallet</option>\n              <option value=\"COD\">ðŸšª Cash on Delivery</option>\n            </select>\n          </div>\n          <div className=\"summary-row total\" style={{ marginBottom: '1.5rem' }}>\n            <span>Amount to Pay</span><span>â‚¹{finalTotal.toFixed(2)}</span>\n          </div>\n          <button className=\"btn btn-gold btn-full\" disabled={loading} onClick={handlePayment}>\n            {loading ? 'â³ Processingâ€¦' : `Pay â‚¹${finalTotal.toFixed(2)} via ${paymentMethod}`}\n          </button>\n        </div>\n      )}\n\n      {/* â”€â”€ STEP 3: Confirmation â”€â”€ */}\n      {step === 3 && (\n        <div className=\"section-card\" style={{ textAlign: 'center', padding: '4rem 2rem' }}>\n          <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>ðŸŽ‰</div>\n          <h2 style={{ fontFamily: 'Cormorant Garamond', fontSize: '2rem', color: 'var(--forest)', marginBottom: '0.5rem' }}>\n            Order Confirmed!\n          </h2>\n          <p style={{ color: 'var(--text-soft)', marginBottom: '0.4rem' }}>\n            Your order #{orderId} has been placed and payment received.\n          </p>\n          <p style={{ color: 'var(--text-pale)', fontSize: '0.9rem', marginBottom: '2rem' }}>\n            You'll receive a notification once it's out for delivery ðŸšš\n          </p>\n          <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>\n            <button className=\"btn btn-ghost\" onClick={() => navigate('/orders')}>View Orders</button>\n            <button className=\"btn btn-primary\" onClick={() => navigate('/products')}>Continue Shopping</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}